import{$ as n,z as w,u as r,y as c,C as d}from"./main-DuiY5PXU.js";window.carouselPosition=0;window.carouselMax=0;async function h(e){let t=e.id;console.log(t);let i;try{i=JSON.parse(t)}catch{}if(i){let s=!1;for(let o=0;o<i.length;o++)if(console.log(i[o]),i[o].type=="thumbsnail"){console.log(i[o].type),console.log(i[o].location),s=!0;let l=p(i[o]);l.style.width="50px",l.style.height="auto",e.appendChild(l),e.onclick=g}if(!s){let o=document.createElement("p");o.textContent="No thumbsnail Available for the current media",e.appendChild(o)}}else{let s=document.createElement("p");s.textContent=t,e.appendChild(s)}}function p(e){let t;return e.type=="video/webm"?(t=document.createElement("video"),t.controls=!0,t.type="video/webm"):(e.type=="image/png"||e.type=="thumbsnail")&&(t=document.createElement("img"),t.type="image/png"),t.src="/files/"+e.location,console.log(t.src),t}function g(e){window.carouselPosition=0;let t;try{t=JSON.parse(e.srcElement.id)}catch{t=JSON.parse(e.srcElement.parentElement.id)}let i=!1;window.carouselMax=t.length-1;let s="<section class='slider-wrapper'><ul class='slides-container list-unstyled' style:'list-style: none !important;' id='slides-container'>";for(let o=0;o<t.length;o++)if(t[o].type!="thumbsnail"){let l=p(t[o]);l.style.width="100%",l.style.objectFit="contain",l.style.height="500px";let a=document.createElement("div");a.append(l),s+='<li class="slide '+(i?o-1:o)+'slide" style="min-height:50%">',s+=a.innerHTML,s+="</li>"}else i=!0;s+="</ul></section>",s+=`<img src onerror='reloadCarousel(this.parentElement);'><button class='btn btn-primary carousel__navigation-button slide-arrow-prev' id='slide-arrow-prev' onclick='downCarousel(this)' style='display:block;position:absolute;top:40%;left:1rem;'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(15,0) rotate(0)"></path></svg></button><button style='position:absolute;top:40%;right:1rem;' class='btn btn-primary carousel__navigation-button slide-arrow-next' id='slide-arrow-next' onclick='upCarousel(this)'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(85,100) rotate(180)"></path></svg></button>`,w({title:"Visioneurs",body:s,button:"retour",additionalClassMain:"FullSizeCarousel"}),document.getElementsByClassName("modal-dialog")[0].style.listStyle="none"}window.upCarousel=function(e){window.carouselPosition+=1,window.carouselPosition!=window.carouselMax-1?(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1):(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!0,e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1)};window.downCarousel=function(e){window.carouselPosition-=1,window.carouselPosition!=0?(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1):(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hiddend=!0,e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1)};window.reloadCarousel=function(e){window.carouselPosition==0&&(e.getElementsByClassName("slide-arrow-prev")[0].hidden=!0),window.carouselMax==1&&(e.getElementsByClassName("slide-arrow-next")[0].hidden=!0);for(let t=0;t<window.carouselMax;t++)if(t==window.carouselPosition)e.getElementsByClassName(t+"slide")[0].hidden=!1;else{e.getElementsByClassName(t+"slide")[0].hidden=!0;let i=e.getElementsByClassName(t+"slide")[0].firstChild;i.nodeName=="VIDEO"&&i.pause()}};function f(e){const t=n(this).data("submission-id"),i=n(this).parent().parent(),s=i.find(".chal").text().trim(),o=i.find(".team").text().trim(),l=n(this).parent().parent();r({title:"Delete Submission",body:"Are you sure you want to delete correct submission from {0} for challenge {1}".format("<strong>"+c(o)+"</strong>","<strong>"+c(s)+"</strong>"),success:function(){alert({submissionId:t}),d.api.delete_submission({submissionId:t}).then(function(a){a.success&&l.remove()})}})}function b(e){let t=n("input[data-submission-id]:checked").map(function(){return n(this).data("submission-id")}),i=t.length===1?"submission":"submissions";r({title:"Delete Submissions",body:`Are you sure you want to delete ${t.length} ${i}?`,success:function(){const s=[];for(var o of t)s.push(d.api.delete_submission({submissionId:o}));Promise.all(s).then(l=>{window.location.reload()})}})}function y(e){let t=n("input[data-submission-id]:checked").map(function(){return n(this).data("submission-id")}),i=t.length===1?"submission":"submissions";r({title:"Correct Submissions",body:`Are you sure you want to mark ${t.length} ${i} correct?`,success:function(){const s=[];for(var o of t){let l=d.fetch(`/api/v1/submissions/${o}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({type:"correct"})});s.push(l)}Promise.all(s).then(l=>{window.location.reload()})}})}function u(e){const t=new URLSearchParams(window.location.search);t.has("full")?t.delete("full"):t.set("full","true"),window.location.href=`${window.location.pathname}?${t.toString()}`}function C(e){let t=n(e.currentTarget),i=t.find("i"),s=t.parent().find("pre");s.hasClass("full-flag")?(s.text(s.attr("title").substring(0,42)+"..."),s.removeClass("full-flag"),i.addClass("fa-eye"),i.removeClass("fa-eye-slash")):(s.text(s.attr("title")),s.addClass("full-flag"),i.addClass("fa-eye-slash"),i.removeClass("fa-eye"))}function E(e){let s=n(e.currentTarget).parent().find("pre").attr("title");navigator.clipboard.writeText(s),n(e.currentTarget).tooltip({title:"Copied!",trigger:"manual"}),n(e.currentTarget).tooltip("show"),setTimeout(function(){n(e.currentTarget).tooltip("hide")},1500)}n(()=>{n("#show-full-flags-button").click(u),n("#show-short-flags-button").click(u),n(".show-flag").click(C),n(".copy-flag").click(E),n("#correct-flags-button").click(y),n(".delete-correct-submission").click(f),n("#submission-delete-button").click(b)});let m=document.getElementsByClassName("imageContainer");for(let e=0;e<m.length;e++)h(m[e]);
