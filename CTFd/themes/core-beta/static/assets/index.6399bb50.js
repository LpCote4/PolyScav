import{d as f}from"./index.5095421b.js";import{u as y,i as x,a as b,b as v,c as S,d as _,e as k,f as A,g as $,h as L,j,k as T,l as w,m as I}from"./echarts.54e741c1.js";function D(s){let l=s.concat();for(let a=0;a<s.length;a++)l[a]=s.slice(0,a+1).reduce(function(o,t){return o+t});return l}function E(s,l){let a={title:{left:"center",text:(s==="teams"?"Teams":"Users")+" Score"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[]};const o=Object.keys(l);let t=[],m={name:"Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.85)"}},c={name:"Potential Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.45)",opacity:.5}},r=0;for(let e=0;e<o.length;e++){const u=l[o[e]].name,i=l[o[e]].score,d=l[o[e]].potential_score,g=l[o[e]].color;r+=u.length,t.push(u),m.data.push({value:i,itemStyle:{color:g}}),c.data.push({value:d,itemStyle:{color:g,opacity:.5}})}const n=r*20+30,h=document.getElementById("score-graph").offsetWidth;return n>h*2?a.xAxis.axisLabel={interval:0,rotate:90}:n>h?a.xAxis.axisLabel={interval:0,rotate:45}:a.xAxis.axisLabel={interval:0,rotate:0},a.xAxis.data=t,a.series.push(m),a.series.push(c),a.series.forEach(e=>{e.barGap="0%",e.barCategoryGap="50%"}),a}function M(s,l,a){const o=Object.keys(s);let t=[],m=999;for(let c=0;c<(o.length>=m?m:o.length);c++){let r=s[o[c]].solves,n=s[o[c]].fails,h=O(l[c].members);for(let e=0;e<r.length;e++){let u=r[e].date;r[e].team_name=s[o[c]].name,r[e].user_name=h[r[e].user_id],r[e].challenge_name=a[r[e].challenge_id],r[e].time=p(u);for(let i=t.length;i>0;i--)if(f(u)>f(t[i-1].date)){let d=t[i-1];t[i-1]=r[e],i<m&&(t[i]=d)}else if(t.length<m&&t.length==i){t.push(r[e]);break}else break;t.length==0&&t.push(r[e])}for(let e=0;e<n.length;e++)if(n[e].type=="manual"||n[e].type=="manualRecursive"){let u=n[e].date;n[e].team_name=s[o[c]].name,n[e].user_name=h[n[e].user_id],n[e].challenge_name=a[n[e].challenge_id],n[e].time=p(u);for(let i=t.length;i>0;i--)if(f(u)>f(t[i-1].date)){let d=t[i-1];t[i-1]=n[e],i<m&&(t[i]=d)}else if(t.length<m&&t.length==i){t.push(n[e]);break}else break;t.length==0&&t.push(n[e])}}return t}function p(s){let l=f()-f(s);return l/(1e3*60*60*24)>=2?"il y a "+Math.floor(l/(1e3*60*60*24))+" jours":l/(1e3*60*60)>=2?"il y a "+Math.floor(l/(1e3*60*60))+" heures":l/(1e3*60)>=2?"il y a "+Math.floor(l/(1e3*60))+" minutes":"il y a moin de 2 minutes"}function O(s){let l={};for(let a=0;a<s.length;a++)l[s[a].id]=s[a].name;return l}y([x,b,v,S,_,k,A,$,L,j,T,w]);function N(s,l){let a=I(s);a.setOption(l),window.addEventListener("resize",()=>{a&&a.resize()})}export{M as a,D as c,N as e,E as g};
