import{d as h}from"./index.5095421b.js";import{u as b,i as x,a as y,b as S,c as v,d as _,e as k,f as L,g as $,h as w,j as A,k as j,l as T,m as z}from"./echarts.54e741c1.js";function E(o){let a=o.concat();for(let l=0;l<o.length;l++)a[l]=o.slice(0,l+1).reduce(function(n,t){return n+t});return a}function M(o,a){let l={title:{left:"center",text:(o==="teams"?"Teams":"Users")+" Score"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},grid:{containLabel:!0},xAxis:{type:"category",data:[],show:!1},yAxis:{type:"value",axisLabel:"",show:!1},series:[]};const n=Object.keys(a);let t=[],u={name:"Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.85)"}},c={name:"Potential Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.45)",opacity:.5}},r=0;for(let e=0;e<n.length;e++){const m=a[n[e]].name,s=a[n[e]].score,f=a[n[e]].potential_score,g=a[n[e]].color;r+=m.length,t.push(m),c.label={show:!0,formatter:"{b}",position:"top",fontSize:24},u.data.push({value:s,itemStyle:{color:g,borderRadius:f==0?[30,30,0,0]:""}}),c.data.push({value:f,itemStyle:{color:g,opacity:.5,borderRadius:[30,30,0,0]}})}const i=r*20+30,d=document.getElementById("score-graph").offsetWidth;return i>d*2?l.xAxis.axisLabel={interval:0,rotate:90}:i>d?l.xAxis.axisLabel={interval:0,rotate:45}:l.xAxis.axisLabel={interval:0,rotate:0},l.xAxis.data=t,l.series.push(u),l.series.push(c),l.series.forEach(e=>{e.barGap="0%",e.barCategoryGap="50%"}),l}function N(o,a,l){console.log(a);const n=Object.keys(o);let t=[],u=999;for(let c=0;c<(n.length>=u?u:n.length);c++){let r=o[n[c]].solves,i=o[n[c]].fails,d=O(a[c].members);for(let e=0;e<r.length;e++){let m=r[e].date;console.log(o[n[c]]),r[e].team_name=o[n[c]].name,r[e].user_name=d[r[e].user_id],r[e].challenge_name=l[r[e].challenge_id],r[e].time=p(m),r[e].color=a[c].color;for(let s=t.length;s>0;s--)if(h(m)>h(t[s-1].date)){let f=t[s-1];t[s-1]=r[e],s<u&&(t[s]=f)}else if(t.length<u&&t.length==s){t.push(r[e]);break}else break;t.length==0&&t.push(r[e])}for(let e=0;e<i.length;e++)if(i[e].type=="manual"||i[e].type=="manualRecursive"){let m=i[e].date;i[e].team_name=o[n[c]].name,i[e].user_name=d[i[e].user_id],i[e].challenge_name=l[i[e].challenge_id],i[e].time=p(m),i[e].color=a[c].color;for(let s=t.length;s>0;s--)if(h(m)>h(t[s-1].date)){let f=t[s-1];t[s-1]=i[e],s<u&&(t[s]=f)}else if(t.length<u&&t.length==s){t.push(i[e]);break}else break;t.length==0&&t.push(i[e])}}return t}function p(o){let a=h()-h(o);return a/(1e3*60*60*24)>=2?""+Math.floor(a/(1e3*60*60*24))+" jours":a/(1e3*60*60)>=2?""+Math.floor(a/(1e3*60*60))+" heures":a/(1e3*60)>=2?""+Math.floor(a/(1e3*60))+" min":"a l'instant"}function O(o){let a={};for(let l=0;l<o.length;l++)a[o[l].id]=o[l].name;return a}b([x,y,S,v,_,k,L,$,w,A,j,T]);function P(o,a){let l=z(o);l.setOption(a),window.addEventListener("resize",()=>{l&&l.resize()})}export{N as a,E as c,P as e,M as g};
