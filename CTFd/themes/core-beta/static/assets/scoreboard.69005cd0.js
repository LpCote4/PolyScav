import{m,C as s}from"./index.5095421b.js";import{g,e as h,a as p}from"./index.54b997ce.js";import"./echarts.54e741c1.js";import{e as b,h as f}from"./CommentBox.6d8c9990.js";window.Alpine=m;window.CTFd=s;window.ScoreboardDetail=0;window.standings=0;window.nbStandings=0;window.scoreboardListLoaded=!1;window.allImages=[];window.allSubmited=[];window.maxCount=0;window.maxCountIncrease=5;window.imageInit=!1;window.theninit=0;m.data("ScoreboardDetail",()=>({data:{},show:!0,async init(){window.standings=await s.pages.scoreboard.getScoreboard(),window.ScoreboardDetail=await s.pages.scoreboard.getScoreboardDetail(window.standings.length);let t=g(s.config.userMode,window.standings);var e=document.getElementById("score-graph");h(e,t),this.show=window.standings.length>0}}));m.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async init(){if(window.standings.length!=0){const e=await(await s.fetch(`/api/v1/brackets?type=${s.config.userMode}`,{method:"GET"})).json();this.brackets=e.data;const o=await(await s.fetch("/api/v1/challenges",{method:"GET"})).json();let i={};for(let a=0;a<o.data.length;a++)i[o.data[a].id]=o.data[a].name;if(window.ScoreboardDetail==0||window.standings==0)this.init();else{let a=p(window.ScoreboardDetail,window.standings,i);for(let l=0;l<a.length;l++)this.standings[l]=a[l]}window.nbStandings=this.standings.length}}}));m.data("LogImage",()=>({async init(){let t=!1,e=0;try{e=JSON.parse(this.id)[0].id,window.allImages.push(e),window.allSubmited.push(e)}catch{t=!0,e="t"+String(Math.random()*1e17),window.allSubmited.push(e)}if(window.allSubmited.length>window.maxCount){let n=document.getElementById(this.id);(this.type=="manual"||this.type=="manualRecursive")&&(n.className+="inSubmission"),t||(n.text="c_id:"+this.challenge_id+"t_id:"+this.team_id),n.id=e,n.hidden=!0}(window.allSubmited.length==window.maxCountIncrease||window.allSubmited.length==window.nbStandings)&&(window.imageInit||window.allSubmited.length!=0&&(window.imageInit=!0,self.showXMore()))}}));globalThis.showXMore=async function(t){let e=[],n=0;for(let a=window.maxCount;a<window.maxCount+window.maxCountIncrease;a++)maxCount+a<window.allSubmited.length&&(window.allSubmited[a].toString().includes("t")?n++:e.push(window.allImages[a-n]),document.getElementById(window.allSubmited[a]).hidden=!1);const i=await(await s.fetch("/api/v1/teams?ids="+JSON.stringify(e),{method:"GET"})).json();for(let a=0;a<window.maxCountIncrease-n;a++)if(maxCount+a<e.length){let l=i.data[a].provided,d=document.getElementById(e[a]),w;try{w=JSON.parse(l)}catch{}if(w){let c=!1;for(let r=0;r<w.length;r++)if(w[r].type=="thumbsnail"){c=!0;let u=createMediaElement(w[r]);u.style.width="50px",u.style.height="auto",d.getElementsByClassName("imageContainer")[0].appendChild(u),d.getElementsByClassName("imageContainer")[0].onclick=showLargeSubmissions,d.value=l}if(!c){let r=document.createElement("p");r.textContent="No thumbsnail Available for the current media",d.getElementsByClassName("imageContainer")[0].appendChild(r)}}}window.maxCount+=window.maxCountIncrease,window.allImages.length<=window.maxCount&&(document.getElementById("plus-btn").disabled=!0)};globalThis.createMediaElement=function(t){let e;return t.type=="video/webm"?(e=document.createElement("video"),e.controls=!0,e.type="video/webm",e.poster=""):(t.type=="image/png"||t.type=="thumbsnail")&&(e=document.createElement("img"),e.type="image/png"),e.src="/files/"+t.location,e};globalThis.showLargeSubmissions=function(t){window.carouselPosition=0;let e,n;try{e=JSON.parse(t.srcElement.parentElement.value),n=t.srcElement.parentElement}catch{e=JSON.parse(t.srcElement.parentElement.parentElement.value),n=t.srcElement.parentElement.parentElement}let o=!1;window.carouselMax=e.length-1;let i="<section class='slider-wrapper'><ul class='slides-container list-unstyled' style:'list-style: none !important;' id='slides-container'>";for(let a=0;a<e.length;a++)if(e[a].type!="thumbsnail"){let l=createMediaElement(e[a]);l.style.width="100%",l.style.objectFit="contain",l.style.height="500px";let d=document.createElement("div");d.append(l),i+='<li class="slide '+(o?a-1:a)+'slide" style="min-height:50%">',i+=d.innerHTML,i+="</li>"}else o=!0;i+="</ul></section>",i+="<img src onerror='reloadCarousel(this.parentElement);'></img>",i+=`<button class='btn btn-primary carousel__navigation-button slide-arrow-prev' id='slide-arrow-prev' onclick='downCarousel(this)' style='display:block;position:absolute;top:40%;left:1rem;'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(15,0) rotate(0)"></path></svg></button>`,i+=`<button style='position:absolute;top:40%;right:1rem;' class='btn btn-primary carousel__navigation-button slide-arrow-next' id='slide-arrow-next' onclick='upCarousel(this)'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(85,100) rotate(180)"></path></svg></button>`,b({title:"Visioneurs",body:i,button:"retour",ids:n.text,additionalClassMain:"FullSizeCarousel"},f,s.user),document.getElementsByClassName("modal-dialog")[0].style.listStyle="none"};window.upCarousel=function(t){window.carouselPosition+=1,window.carouselPosition!=window.carouselMax-1?(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1):(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!0,t.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1)};window.downCarousel=function(t){window.carouselPosition-=1,window.carouselPosition!=0?(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1):(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-prev")[0].hiddend=!0,t.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1)};window.reloadCarousel=function(t){window.carouselPosition==0&&(t.getElementsByClassName("slide-arrow-prev")[0].hidden=!0),window.carouselMax==1&&(t.getElementsByClassName("slide-arrow-next")[0].hidden=!0);for(let e=0;e<window.carouselMax;e++)if(e==window.carouselPosition)t.getElementsByClassName(e+"slide")[0].hidden=!1;else{t.getElementsByClassName(e+"slide")[0].hidden=!0;let n=t.getElementsByClassName(e+"slide")[0].firstChild;n.nodeName=="VIDEO"&&n.pause()}};m.start();
