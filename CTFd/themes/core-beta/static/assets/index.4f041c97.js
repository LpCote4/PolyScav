import{d}from"./index.5095421b.js";import{u as p,i as y,a as x,b,c as v,d as S,e as _,f as k,g as A,h as $,j as L,k as j,l as T,m as w}from"./echarts.54e741c1.js";function z(s){let l=s.concat();for(let a=0;a<s.length;a++)l[a]=s.slice(0,a+1).reduce(function(o,t){return o+t});return l}function D(s,l){let a={title:{left:"center",text:(s==="teams"?"Teams":"Users")+" Score"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[]};const o=Object.keys(l);let t=[],c={name:"Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.85)"}},u={name:"Potential Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.45)",opacity:.5}};for(let m=0;m<o.length;m++){const e=l[o[m]].name,f=l[o[m]].score,i=l[o[m]].potential_score,h=l[o[m]].color;t.push(e),c.data.push({value:f,itemStyle:{color:h}}),u.data.push({value:i,itemStyle:{color:h,opacity:.5}})}const r=t.length*100,n=document.getElementById("score-graph").offsetWidth;return r>n*2?a.xAxis.axisLabel={interval:0,rotate:90}:r>n?a.xAxis.axisLabel={interval:0,rotate:45}:a.xAxis.axisLabel={interval:0,rotate:0},a.xAxis.data=t,a.series.push(c),a.series.push(u),a.series.forEach(m=>{m.barGap="0%",m.barCategoryGap="50%"}),a}function E(s,l,a){const o=Object.keys(s);let t=[],c=999;for(let u=0;u<(o.length>=c?c:o.length);u++){let r=s[o[u]].solves,n=s[o[u]].fails,m=I(l[u].members);for(let e=0;e<r.length;e++){let f=r[e].date;r[e].team_name=s[o[u]].name,r[e].user_name=m[r[e].user_id],r[e].challenge_name=a[r[e].challenge_id],r[e].time=g(f);for(let i=t.length;i>0;i--)if(d(f)>d(t[i-1].date)){let h=t[i-1];t[i-1]=r[e],i<c&&(t[i]=h)}else if(t.length<c&&t.length==i){t.push(r[e]);break}else break;t.length==0&&t.push(r[e])}for(let e=0;e<n.length;e++)if(n[e].type=="manual"||n[e].type=="manualRecursive"){let f=n[e].date;n[e].team_name=s[o[u]].name,n[e].user_name=m[n[e].user_id],n[e].challenge_name=a[n[e].challenge_id],n[e].time=g(f);for(let i=t.length;i>0;i--)if(d(f)>d(t[i-1].date)){let h=t[i-1];t[i-1]=n[e],i<c&&(t[i]=h)}else if(t.length<c&&t.length==i){t.push(n[e]);break}else break;t.length==0&&t.push(n[e])}}return t}function g(s){let l=d()-d(s);return l/(1e3*60*60*24)>=2?"il y a "+Math.floor(l/(1e3*60*60*24))+" jours":l/(1e3*60*60)>=2?"il y a "+Math.floor(l/(1e3*60*60))+" heures":l/(1e3*60)>=2?"il y a "+Math.floor(l/(1e3*60))+" minutes":"il y a moin de 2 minutes"}function I(s){let l={};for(let a=0;a<s.length;a++)l[s[a].id]=s[a].name;return l}p([y,x,b,v,S,_,k,A,$,L,j,T]);function M(s,l){let a=w(s);a.setOption(l),window.addEventListener("resize",()=>{a&&a.resize()})}export{E as a,z as c,M as e,D as g};
