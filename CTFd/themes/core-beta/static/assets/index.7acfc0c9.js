import{d as h}from"./index.5095421b.js";import{u as x,i as y,a as b,b as v,c as S,d as _,e as k,f as A,g as L,h as $,j as w,k as j,l as T,m as z}from"./echarts.54e741c1.js";function D(s){let l=s.concat();for(let a=0;a<s.length;a++)l[a]=s.slice(0,a+1).reduce(function(o,t){return o+t});return l}function E(s,l){let a={title:{left:"center",text:(s==="teams"?"Teams":"Users")+" Score"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:{type:"category",data:[],show:!1},yAxis:{type:"value",axisLabel:"",show:!1},series:[]};const o=Object.keys(l);let t=[],c={name:"Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.85)"}},u={name:"Potential Score",type:"bar",stack:"total",data:[],itemStyle:{color:"rgba(0, 0, 0, 0.45)",opacity:.5}},r=0;for(let e=0;e<o.length;e++){const m=l[o[e]].name,i=l[o[e]].score,f=l[o[e]].potential_score,g=l[o[e]].color;r+=m.length,t.push(m),u.label={show:!0,formatter:"{b}",position:"top",fontSize:24},c.data.push({value:i,itemStyle:{color:g,borderRadius:f==0?[30,30,0,0]:""}}),u.data.push({value:f,itemStyle:{color:g,opacity:.5,borderRadius:[30,30,0,0]}})}const n=r*20+30,d=document.getElementById("score-graph").offsetWidth;return n>d*2?a.xAxis.axisLabel={interval:0,rotate:90}:n>d?a.xAxis.axisLabel={interval:0,rotate:45}:a.xAxis.axisLabel={interval:0,rotate:0},a.xAxis.data=t,a.series.push(c),a.series.push(u),a.series.forEach(e=>{e.barGap="0%",e.barCategoryGap="50%"}),a}function M(s,l,a){const o=Object.keys(s);let t=[],c=999;for(let u=0;u<(o.length>=c?c:o.length);u++){let r=s[o[u]].solves,n=s[o[u]].fails,d=I(l[u].members);for(let e=0;e<r.length;e++){let m=r[e].date;r[e].team_name=s[o[u]].name,r[e].user_name=d[r[e].user_id],r[e].challenge_name=a[r[e].challenge_id],r[e].time=p(m);for(let i=t.length;i>0;i--)if(h(m)>h(t[i-1].date)){let f=t[i-1];t[i-1]=r[e],i<c&&(t[i]=f)}else if(t.length<c&&t.length==i){t.push(r[e]);break}else break;t.length==0&&t.push(r[e])}for(let e=0;e<n.length;e++)if(n[e].type=="manual"||n[e].type=="manualRecursive"){let m=n[e].date;n[e].team_name=s[o[u]].name,n[e].user_name=d[n[e].user_id],n[e].challenge_name=a[n[e].challenge_id],n[e].time=p(m);for(let i=t.length;i>0;i--)if(h(m)>h(t[i-1].date)){let f=t[i-1];t[i-1]=n[e],i<c&&(t[i]=f)}else if(t.length<c&&t.length==i){t.push(n[e]);break}else break;t.length==0&&t.push(n[e])}}return t}function p(s){let l=h()-h(s);return l/(1e3*60*60*24)>=2?"il y a "+Math.floor(l/(1e3*60*60*24))+" jours":l/(1e3*60*60)>=2?"il y a "+Math.floor(l/(1e3*60*60))+" heures":l/(1e3*60)>=2?"il y a "+Math.floor(l/(1e3*60))+" minutes":"il y a un instant"}function I(s){let l={};for(let a=0;a<s.length;a++)l[s[a].id]=s[a].name;return l}x([y,b,v,S,_,k,A,L,$,w,j,T]);function N(s,l){let a=z(s);a.setOption(l),window.addEventListener("resize",()=>{a&&a.resize()})}export{M as a,D as c,N as e,E as g};
