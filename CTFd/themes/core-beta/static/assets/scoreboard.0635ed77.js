import{m as c,C as o}from"./index.5095421b.js";import{g as h,e as p,a as b}from"./index.2c8751cd.js";import"./echarts.54e741c1.js";import{e as E,h as f}from"./CommentBox.3be5197b.js";window.Alpine=c;window.CTFd=o;window.ScoreboardDetail=0;window.standings=0;window.nbStandings=0;window.scoreboardListLoaded=!1;window.allImages=[];window.allSubmited=[];window.maxCount=0;window.maxCountIncrease=5;window.imageInit=!1;window.theninit=0;window.decalage=0;c.data("ScoreboardDetail",()=>({data:{},show:!0,async init(){window.standings=await o.pages.scoreboard.getScoreboard(),window.ScoreboardDetail=await o.pages.scoreboard.getScoreboardDetail(window.standings.length);let a=h(o.config.userMode,window.standings);var e=document.getElementById("score-graph");p(e,a),this.show=window.standings.length>0}}));c.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async init(){if(window.standings.length!=0){const e=await(await o.fetch(`/api/v1/brackets?type=${o.config.userMode}`,{method:"GET"})).json();this.brackets=e.data;const s=await(await o.fetch("/api/v1/challenges",{method:"GET"})).json();let i={};for(let t=0;t<s.data.length;t++)i[s.data[t].id]=s.data[t].name;if(window.ScoreboardDetail==0||window.standings==0)this.init();else{let t=b(window.ScoreboardDetail,window.standings,i);for(let n=0;n<t.length;n++)this.standings[n]=t[n]}window.nbStandings=this.standings.length}console.log(this.standings)}}));c.data("LogImage",()=>({async init(){let a=!1,e=0;try{e=JSON.parse(this.id)[0].id,window.allImages.push(e),window.allSubmited.push(e)}catch{a=!0;let s="";this.id=="Media en train d'\xEAtre trait\xE9"&&(s="Media en train d'\xEAtre trait\xE9"),e=s+"%"+String(Math.random()*1e17),window.allSubmited.push(e)}if(window.allSubmited.length>window.maxCount){let l=document.getElementById(this.id);(this.type=="manual"||this.type=="manualRecursive")&&(l.className+="inSubmission"),a||(l.text=this.challenge_id);try{l.id=e,l.hidden=!0}catch{this.id=e,console.log(this.id)}}(window.allSubmited.length==window.maxCountIncrease||window.allSubmited.length==window.nbStandings)&&(window.imageInit||window.allSubmited.length!=0&&(window.imageInit=!0,self.showXMore()))}}));globalThis.showXMore=async function(a){let e=[];for(let t=window.maxCount;t<window.maxCount+window.maxCountIncrease;t++)try{if(t<window.allSubmited.length){if(!window.allSubmited[t].toString().includes("%"))e.push(window.allImages[t-window.decalage]);else{let n=document.createElement("p");n.textContent="reponse cach\xE9e",window.allSubmited[t].split("%").length>1&&(n.textContent=window.allSubmited[t].split("%")[0]),document.getElementById(window.allSubmited[t]).getElementsByClassName("imageContainer")[0].append(n),window.decalage++}document.getElementById(window.allSubmited[t]).hidden=!1}}catch{}const s=await(await o.fetch("/api/v1/teams?ids="+JSON.stringify(e),{method:"GET"})).json();for(let t=0;t<window.maxCountIncrease;t++)try{if(t<e.length){let n=s.data[t].provided,d=document.getElementById(e[t]),m=!1;try{m=JSON.parse(n)}catch{}if(m){let g=!1;for(let r=0;r<m.length;r++)if(m[r].type=="thumbsnail"){g=!0;let w=createMediaElement(m[r]);w.style["max-width"]="100%",w.style.display="block",w.style.height="auto",w.onload=function(u){checkImageOrientation(u)},d.getElementsByClassName("imageContainer")[0].appendChild(w),d.getElementsByClassName("imageContainer")[0].onclick=showLargeSubmissions,d.value=n}if(!g){let r=document.createElement("p");r.textContent="No thumbsnail Available for the current media",d.getElementsByClassName("imageContainer")[0].appendChild(r)}}}}catch{}window.maxCount+=window.maxCountIncrease,window.allImages.length<=window.maxCount&&(document.getElementById("plus-btn").disabled=!0);let i=document.getElementsByClassName("award-icon");for(let t=0;t<i.length;t++)console.log(i[t].parentElement),i[t].parentElement.getElementsByClassName("challenge_name")[0].textContent||(i[t].hidden=!1,i[t].parentElement.getElementsByClassName("challenge_name")[0].hidden=!0)};globalThis.checkImageOrientation=function(a){const e=a.target;console.log(e.naturalWidth),console.log(e.naturalHeight),e.naturalWidth>e.naturalHeight?(e.classList.add("landscape"),e.parentElement.classList.add("landscape-td"),e.parentElement.parentElement.classList.add("landscape-td")):(e.classList.add("portrait"),e.parentElement.classList.add("portrait-td"),e.parentElement.parentElement.classList.add("portrait-td")),e.parentElement.parentElement.style.transform+="rotate("+(Math.random()>.5?-1:1)*(Math.random()*6)+"deg)"};globalThis.createMediaElement=function(a){let e;return a.type=="video/webm"?(e=document.createElement("video"),e.controls=!0,e.type="video/webm",e.poster=""):(a.type=="image/png"||a.type=="thumbsnail")&&(e=document.createElement("img"),e.type="image/png"),e.src="/files/"+a.location,e};globalThis.showLargeSubmissions=function(a){window.carouselPosition=0;let e,l;try{e=JSON.parse(a.srcElement.parentElement.value),l=a.srcElement.parentElement}catch{e=JSON.parse(a.srcElement.parentElement.parentElement.value),l=a.srcElement.parentElement.parentElement}let s=!1;window.carouselMax=e.length-1;let i="<section class='slider-wrapper'><ul class='slides-container list-unstyled' style:'list-style: none !important;' id='slides-container'>";for(let t=0;t<e.length;t++)if(e[t].type!="thumbsnail"){let n=createMediaElement(e[t]);n.style.width="100%",n.style.objectFit="contain",n.style.height="500px";let d=document.createElement("div");d.append(n),i+='<li class="slide '+(s?t-1:t)+'slide" style="min-height:50%">',i+=d.innerHTML,i+="</li>"}else s=!0;i+="</ul></section>",i+="<img src onerror='reloadCarousel(this.parentElement);'></img>",i+=`<button class='btn btn-primary carousel__navigation-button slide-arrow-prev' id='slide-arrow-prev' onclick='downCarousel(this)' style='display:block;position:absolute;top:40%;left:1rem;'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(15,0) rotate(0)"></path></svg></button>`,i+=`<button style='position:absolute;top:40%;right:1rem;' class='btn btn-primary carousel__navigation-button slide-arrow-next' id='slide-arrow-next' onclick='upCarousel(this)'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(85,100) rotate(180)"></path></svg></button>`,console.log(l.id),E({title:"Visioneurs",body:i,button:"retour",challenge_id:l.text,ids:l.id,additionalClassMain:"FullSizeCarousel"},f,o.user),document.getElementsByClassName("modal-dialog")[0].style.listStyle="none"};window.upCarousel=function(a){window.carouselPosition+=1,window.carouselPosition!=window.carouselMax-1?(window.reloadCarousel(a.parentElement),a.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1):(window.reloadCarousel(a.parentElement),a.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!0,a.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1)};window.downCarousel=function(a){window.carouselPosition-=1,window.carouselPosition!=0?(window.reloadCarousel(a.parentElement),a.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1):(window.reloadCarousel(a.parentElement),a.parentElement.getElementsByClassName("slide-arrow-prev")[0].hiddend=!0,a.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1)};window.reloadCarousel=function(a){window.carouselPosition==0&&(a.getElementsByClassName("slide-arrow-prev")[0].hidden=!0),window.carouselMax==1&&(a.getElementsByClassName("slide-arrow-next")[0].hidden=!0);for(let e=0;e<window.carouselMax;e++)if(e==window.carouselPosition)a.getElementsByClassName(e+"slide")[0].hidden=!1;else{a.getElementsByClassName(e+"slide")[0].hidden=!0;let l=a.getElementsByClassName(e+"slide")[0].firstChild;l.nodeName=="VIDEO"&&l.pause()}};c.start();
